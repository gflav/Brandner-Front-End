!function(e){e(document).ready(function(){t.init()});var t={source:null,template:null,init:function(){this.setup(),this.listen()},setup:function(){this.templates()},templates:function(){this.source=e("#template-modal-gallery").html(),this.template=Handlebars.compile(this.source)},listen:function(){e(document).on("modal.close",function(e,t){"gallery"==t&&$modal.remove("gallery")}),e(".trigger-modal-video").click(function(a){a.preventDefault();var i=e(this);if(!i.data("loading")){i.data("loading",1);var r=[{type:"video",embed:$tbo.convertMedia(i.attr("data-video"),{autoplay:1})}];$modal.open("gallery",{html:t.template({items:r,count:r.length})}),i.data("loading",0)}}),e(".btn-gallery,.trigger-gallery").click(function(a){a.preventDefault();var i=e(this);if(!i.data("loading")){i.data("loading",1);var r=i.attr("title");e.ajax({url:i.attr("data-route")}).done(function(a){i.data("loading",0);var l="gallery",n=t.parseGalleryItems(a);$modal.open(l,{html:t.template({title:r,items:n,count:n.length})});var d=e(".modal-gallery",$modal.getInstance(l).instance),s=e(".modal-gallery-item",d);s.css("visibility","hidden"),d.css("height","120px"),d.prepend('<div class="brandner-loader"></div>'),d.imagesLoaded().always(function(){d.css("height","auto"),e(".brandner-loader").remove(),d.slick({infinite:!0,autoplay:!1,autoplaySpeed:brandnerdesign.setting.sliderSpeed,dots:!1,slidesToShow:1,adaptiveHeight:!0,centerMode:!0,centerPadding:"0px",cssEase:brandnerdesign.setting.cssEase,nextArrow:".btn-next",prevArrow:".btn-prev",lazyLoad:"ondemand"}),s.css("visibility","visible"),d.on("afterChange",function(t,a){var i=a.currentSlide+1;e(".modal-instance-gallery .current-item").text(i)})})})}})},parseGalleryItems:function(t){var a=[];if(t){if(t.acf&&t.acf.post_media&&t.acf.post_media.length>0){var i=t.acf.post_media;e.each(i,function(t,i){i.bd_img_gal&&i.bd_img_gal.length>0&&e.each(i.bd_img_gal,function(e,t){a.push({type:"image",url:t.sizes["viewer-large"]})}),i.vimeo_vids&&"0"!=i.vimeo_vids&&i.vimeo_vids.length>0&&e.each(i.vimeo_vids,function(e,t){a.push({type:"video",embed:$tbo.convertMedia(t.vimeo_url)})})})}0===a.length&&t.better_featured_image&&t.better_featured_image.media_details&&(t.better_featured_image.media_details.sizes&&t.better_featured_image.media_details.sizes["viewer-large"]?(a.push({type:"image",url:t.better_featured_image.media_details.sizes["viewer-large"].source_url}),a.push({type:"image",url:t.better_featured_image.media_details.sizes["viewer-large"].source_url})):(a.push({type:"image",url:t.better_featured_image.source_url}),a.push({type:"image",url:t.better_featured_image.source_url})))}return a}}}(jQuery);